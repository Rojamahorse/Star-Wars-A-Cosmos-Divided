/* ----------------------------------------------------------------------------

Introduction: SW:ACD 0.3.7

Author : Lafiel
Description:
Currently prototyping

Base file used for turrets with a turret base disc of 6x6 and a large turret, hence, plus 2 tile size.

Versions:

 o 1.0 Cosmoteer 0.15.12

---------------------------------------------------------------------------- */ 
Part : /BASE_PART
{
	NameKey = "Parts/TurbolaserLarge"
	IconNameKey = "Parts/TurbolaserLargeIcon"
	ID = SW.turbolaser_large_base
	DescriptionKey = "Parts/TurbolaserLargeDesc"
	EditorGroup = "TechI"
	Cost = 130000
	AIValue = &Cost
	TypeCategories = [weapon, uses_power, is_crewed]
	RequiresCategories = [bridge1]
	Size = [8, 8]
	SelectionPriority = 1
	SelectionTypeByRotation = true
	SelectionTypeID = "cannons" 
	MaxHealth = 168000
	Density = 1 + (&~/Part/TurretDensity)
	InitialPenetrationResistance = 5
	PenetrationRectType = Normal

	Components : ^/0/Components, &<graphics.txt>
	{
		IsOperational
		{
			Type = MultiToggle
			Toggles = [PowerToggle, PartCrew, BatteryStorage]
			Mode = All
		}
		
		PowerToggle
		{
			Type = UIToggle
			ToggleID = "on_off"
			Default = 1
		}

		FireModeToggle
		{
			Type = UIToggle
			ToggleID = "fire_mode"
			Default = 1
			ToggledOnChoices = [0, 1, 2]
		}
		AutoTargetToggle
		{
			Type = ModeToggle
			Mode = FireModeToggle
			OnModes = [1, 2]
		}
		AutoFireToggle
		{
			Type = ModeToggle
			Mode = FireModeToggle
			OnMode = 2
		}
		AmmoPrereq
		{
			Type = MultiAmmoStorage
			AmmoType = battery
			AmmoStorages = [BatteryStorage]
			//ToggleOnAmmo = 19001
			//ToggleOffAmmo = 3750
		}
		BatteryStorage
		{
			Type = AmmoStorage
			AmmoType = battery
			MaxAmmo = 20000
			ToggleOnAmmo = 10001
		}
		BatteryConsumer
		{
			Type = AmmoConsumer
			AmmoType = battery
			Storage = BatteryStorage
			DefaultPriority = &/PRIORITIES/Weapon_Supply
			//AdditionalStorageForJobPriority = [ChargeStorage, ChargeStorage2]
			ResupplyThreshold = 500
			OperationalToggle = PowerToggle

			ReceiveAmmoMediaEffects = &/COMMON_EFFECTS/PowerDeliver
		}

		CrewLocation
		{
			Type = CrewLocation
			Location = [1.546875, 3.59375] //-157,-26
			Rotation = 180d
		}
		CrewLocation2
		{
			Type = CrewLocation
			Location = [2.453125, 3.59375] //-99,-26
			Rotation = 180d
		}
		CrewLocation3
		{
			Type = CrewLocation
			Location = [6.453125, 3.59375]
			Rotation = 180d
		}
		CrewLocation4
		{
			Type = CrewLocation
			Location = [5.546875, 3.59375]
			Rotation = 180d
		}
		CrewLocation5
		{
			Type = CrewLocation
			Location = [3.546875, 5.59375] //-29, 102
			Rotation = 180d
		}
		CrewLocation6
		{
			Type = CrewLocation
			Location = [4.453125, 5.59375]
			Rotation = 180d
		}
		PartCrew
		{
			Type = PartCrew
			Crew = 6
			DefaultPriority = &/PRIORITIES/Weapon_Crew
			PrerequisitesBeforeCrewing = [PowerToggle]
			HighPriorityPrerequisites = [AmmoPrereq, BatteryStorage]
			CrewDestinations
			[
				&../../CrewLocation/Location
				&../../CrewLocation2/Location
				&../../CrewLocation3/Location
				&../../CrewLocation4/Location
				&../../CrewLocation5/Location
				&../../CrewLocation6/Location
			]
			CrewLocations
			[
				CrewLocation
				CrewLocation2
				CrewLocation3
				CrewLocation4
				CrewLocation5
				CrewLocation6
			]
		}

		OperationEffects
		{
			Type = ToggleEffects
			Location = [4, 4]
			Toggle = IsOperational
			ToggledOnMediaEffects = &/COMMON_EFFECTS/MachinesOn
			ToggledOffMediaEffects = &/COMMON_EFFECTS/MachinesOff
		}

		DestroyedEffects
		{
			Type = DeathEffects
			MediaEffects = &/COMMON_EFFECTS/BigPartDestroyed
			Location = [4, 4]
		}

		Indicators
		{
			Type = IndicatorSprites
			Location = [4, 4]
			Layer = "indicators"
			Indicators
			[
				// Turned off.
				{
					Toggle = PowerToggle
					AtlasSprite
					{
						File = &/INDICATORS/PowerOff
						Size = [2, 2]
					}
				}

				// Out of power.
				{
					Toggle = BatteryStorage
					AtlasSprite
					{
						File = &/INDICATORS/NoPower
						Size = [2, 2]
					}
				}

				// No crew.
				{
					Toggle = PartCrew
					AtlasSprite
					{
						File = &/INDICATORS/NoCrew
						Size = [2, 2]
					}
				}
			]
		}

	}

}

